var TYPE = require('../../tokenizer').TYPE;
<<<<<<< HEAD

var RIGHTPARENTHESIS = TYPE.RightParenthesis;

// <function-token> <sequence> )
=======
var RIGHTPARENTHESIS = TYPE.RightParenthesis;

// <function-token> <sequence> ')'
>>>>>>> 99ef3b4711c8dcd2f717e43dd012712d1f333361
module.exports = {
    name: 'Function',
    structure: {
        name: String,
        children: [[]]
    },
    parse: function(readSequence, recognizer) {
        var start = this.scanner.tokenStart;
<<<<<<< HEAD
        var name = this.consumeFunctionName();
=======
        var name = this.scanner.consumeFunctionName();
>>>>>>> 99ef3b4711c8dcd2f717e43dd012712d1f333361
        var nameLowerCase = name.toLowerCase();
        var children;

        children = recognizer.hasOwnProperty(nameLowerCase)
            ? recognizer[nameLowerCase].call(this, recognizer)
            : readSequence.call(this, recognizer);

<<<<<<< HEAD
        if (!this.scanner.eof) {
            this.eat(RIGHTPARENTHESIS);
        }
=======
        this.scanner.eat(RIGHTPARENTHESIS);
>>>>>>> 99ef3b4711c8dcd2f717e43dd012712d1f333361

        return {
            type: 'Function',
            loc: this.getLocation(start, this.scanner.tokenStart),
            name: name,
            children: children
        };
    },
<<<<<<< HEAD
    generate: function(node) {
        this.chunk(node.name);
        this.chunk('(');
        this.children(node);
        this.chunk(')');
=======
    generate: function(processChunk, node) {
        processChunk(node.name);
        processChunk('(');
        this.each(processChunk, node);
        processChunk(')');
>>>>>>> 99ef3b4711c8dcd2f717e43dd012712d1f333361
    },
    walkContext: 'function'
};

'use strict'
<<<<<<< HEAD
=======
var crypto = require('crypto')
>>>>>>> 99ef3b4711c8dcd2f717e43dd012712d1f333361
var MurmurHash3 = require('imurmurhash')

module.exports = function (uniq) {
  if (uniq) {
    var hash = new MurmurHash3(uniq)
    return ('00000000' + hash.result().toString(16)).substr(-8)
  } else {
<<<<<<< HEAD
    return (Math.random().toString(16) + '0000000').substr(2, 8)
=======
    // Called without a callback, because this interface should neither block
    // nor error (by contrast with randomBytes which will throw an exception
    // without enough entropy).
    //
    // However, due to a change in Node 0.10.27+, pseudoRandomBytes is now the
    // same as randomBytes, and may in fact block in situations where
    // insufficent entropy is available.
    return crypto.pseudoRandomBytes(4).toString('hex')
>>>>>>> 99ef3b4711c8dcd2f717e43dd012712d1f333361
  }
}

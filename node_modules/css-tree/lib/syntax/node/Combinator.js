var TYPE = require('../../tokenizer').TYPE;

<<<<<<< HEAD
var IDENT = TYPE.Ident;
var PLUSSIGN = 0x002B;        // U+002B PLUS SIGN (+)
var SOLIDUS = 0x002F;         // U+002F SOLIDUS (/)
var GREATERTHANSIGN = 0x003E; // U+003E GREATER-THAN SIGN (>)
var TILDE = 0x007E;           // U+007E TILDE (~)
=======
var PLUSSIGN = TYPE.PlusSign;
var SOLIDUS = TYPE.Solidus;
var GREATERTHANSIGN = TYPE.GreaterThanSign;
var TILDE = TYPE.Tilde;
>>>>>>> 99ef3b4711c8dcd2f717e43dd012712d1f333361

// + | > | ~ | /deep/
module.exports = {
    name: 'Combinator',
    structure: {
        name: String
    },
    parse: function() {
        var start = this.scanner.tokenStart;
<<<<<<< HEAD
        var code = this.scanner.source.charCodeAt(this.scanner.tokenStart);

        switch (code) {
=======

        switch (this.scanner.tokenType) {
>>>>>>> 99ef3b4711c8dcd2f717e43dd012712d1f333361
            case GREATERTHANSIGN:
            case PLUSSIGN:
            case TILDE:
                this.scanner.next();
                break;

            case SOLIDUS:
                this.scanner.next();
<<<<<<< HEAD

                if (this.scanner.tokenType !== IDENT || this.scanner.lookupValue(0, 'deep') === false) {
                    this.error('Identifier `deep` is expected');
                }

                this.scanner.next();

                if (!this.scanner.isDelim(SOLIDUS)) {
                    this.error('Solidus is expected');
                }

                this.scanner.next();
                break;

            default:
                this.error('Combinator is expected');
=======
                this.scanner.expectIdentifier('deep');
                this.scanner.eat(SOLIDUS);
                break;

            default:
                this.scanner.error('Combinator is expected');
>>>>>>> 99ef3b4711c8dcd2f717e43dd012712d1f333361
        }

        return {
            type: 'Combinator',
            loc: this.getLocation(start, this.scanner.tokenStart),
            name: this.scanner.substrToCursor(start)
        };
    },
<<<<<<< HEAD
    generate: function(node) {
        this.chunk(node.name);
=======
    generate: function(processChunk, node) {
        processChunk(node.name);
>>>>>>> 99ef3b4711c8dcd2f717e43dd012712d1f333361
    }
};

'use strict';
const path = require('path');
const commonDir = require('commondir');
const pkgDir = require('pkg-dir');
const makeDir = require('make-dir');

<<<<<<< HEAD
module.exports = (options = {}) => {
	const {name} = options;
	let directory = options.cwd;

	if (options.files) {
		directory = commonDir(directory, options.files);
	} else {
		directory = directory || process.cwd();
	}

	directory = pkgDir.sync(directory);

	if (directory) {
		directory = path.join(directory, 'node_modules', '.cache', name);

		if (directory && options.create) {
			makeDir.sync(directory);
		}

		if (options.thunk) {
			return (...arguments_) => path.join(directory, ...arguments_);
		}
	}

	return directory;
=======
module.exports = options => {
	const name = options.name;
	let dir = options.cwd;

	if (options.files) {
		dir = commonDir(dir, options.files);
	} else {
		dir = dir || process.cwd();
	}

	dir = pkgDir.sync(dir);

	if (dir) {
		dir = path.join(dir, 'node_modules', '.cache', name);

		if (dir && options.create) {
			makeDir.sync(dir);
		}

		if (options.thunk) {
			return function () {
				return path.join.apply(path, [dir].concat(Array.prototype.slice.call(arguments)));
			};
		}
	}

	return dir;
>>>>>>> 99ef3b4711c8dcd2f717e43dd012712d1f333361
};

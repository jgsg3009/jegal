var TYPE = require('../../tokenizer').TYPE;

<<<<<<< HEAD
var IDENT = TYPE.Ident;
var ASTERISK = 0x002A;     // U+002A ASTERISK (*)
var VERTICALLINE = 0x007C; // U+007C VERTICAL LINE (|)

function eatIdentifierOrAsterisk() {
    if (this.scanner.tokenType !== IDENT &&
        this.scanner.isDelim(ASTERISK) === false) {
        this.error('Identifier or asterisk is expected');
=======
var IDENTIFIER = TYPE.Identifier;
var ASTERISK = TYPE.Asterisk;
var VERTICALLINE = TYPE.VerticalLine;

function eatIdentifierOrAsterisk() {
    if (this.scanner.tokenType !== IDENTIFIER &&
        this.scanner.tokenType !== ASTERISK) {
        this.scanner.error('Identifier or asterisk is expected');
>>>>>>> 99ef3b4711c8dcd2f717e43dd012712d1f333361
    }

    this.scanner.next();
}

// ident
// ident|ident
// ident|*
// *
// *|ident
// *|*
// |ident
// |*
module.exports = {
    name: 'TypeSelector',
    structure: {
        name: String
    },
    parse: function() {
        var start = this.scanner.tokenStart;

<<<<<<< HEAD
        if (this.scanner.isDelim(VERTICALLINE)) {
=======
        if (this.scanner.tokenType === VERTICALLINE) {
>>>>>>> 99ef3b4711c8dcd2f717e43dd012712d1f333361
            this.scanner.next();
            eatIdentifierOrAsterisk.call(this);
        } else {
            eatIdentifierOrAsterisk.call(this);

<<<<<<< HEAD
            if (this.scanner.isDelim(VERTICALLINE)) {
=======
            if (this.scanner.tokenType === VERTICALLINE) {
>>>>>>> 99ef3b4711c8dcd2f717e43dd012712d1f333361
                this.scanner.next();
                eatIdentifierOrAsterisk.call(this);
            }
        }

        return {
            type: 'TypeSelector',
            loc: this.getLocation(start, this.scanner.tokenStart),
            name: this.scanner.substrToCursor(start)
        };
    },
<<<<<<< HEAD
    generate: function(node) {
        this.chunk(node.name);
=======
    generate: function(processChunk, node) {
        processChunk(node.name);
>>>>>>> 99ef3b4711c8dcd2f717e43dd012712d1f333361
    }
};

'use strict';

var keys = require('object-keys');
var forEach = require('foreach');
<<<<<<< HEAD
var indexOf = require('array.prototype.indexof');
=======
>>>>>>> 99ef3b4711c8dcd2f717e43dd012712d1f333361

module.exports = function diffOperations(actual, expected, expectedMissing) {
	var actualKeys = keys(actual);
	var expectedKeys = keys(expected);

	var extra = [];
	var missing = [];
	forEach(actualKeys, function (op) {
		if (!(op in expected)) {
			extra.push(op);
<<<<<<< HEAD
		} else if (indexOf(expectedMissing, op) !== -1) {
			extra.push(op);
		}
	});
	forEach(expectedKeys, function (op) {
		if (typeof actual[op] !== 'function' && indexOf(expectedMissing, op) === -1) {
=======
		}
	});
	forEach(expectedKeys, function (op) {
		if (!(op in actual) && expectedMissing.indexOf(op) === -1) {
>>>>>>> 99ef3b4711c8dcd2f717e43dd012712d1f333361
			missing.push(op);
		}
	});

	return { missing: missing, extra: extra };
};

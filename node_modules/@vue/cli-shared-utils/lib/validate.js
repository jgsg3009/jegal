const { exit } = require('./exit')

// proxy to joi for option validation
<<<<<<< HEAD
exports.createSchema = fn => fn(require('@hapi/joi'))

exports.validate = (obj, schema, cb) => {
  require('@hapi/joi').validate(obj, schema, {}, err => {
=======
exports.createSchema = fn => fn(require('joi'))

exports.validate = (obj, schema, cb) => {
  require('joi').validate(obj, schema, {}, err => {
>>>>>>> 99ef3b4711c8dcd2f717e43dd012712d1f333361
    if (err) {
      cb(err.message)
      if (process.env.VUE_CLI_TEST) {
        throw err
      } else {
        exit(1)
      }
    }
  })
}

exports.validateSync = (obj, schema) => {
<<<<<<< HEAD
  const result = require('@hapi/joi').validate(obj, schema)
=======
  const result = require('joi').validate(obj, schema)
>>>>>>> 99ef3b4711c8dcd2f717e43dd012712d1f333361
  if (result.error) {
    throw result.error
  }
}

<<<<<<< HEAD
var List = require('../common/List');

module.exports = function createConvertors(walk) {
    return {
        fromPlainObject: function(ast) {
            walk(ast, {
                enter: function(node) {
                    if (node.children && node.children instanceof List === false) {
                        node.children = new List().fromArray(node.children);
                    }
=======
var List = require('../utils/list');

module.exports = function createConvertors(walker) {
    var walk = walker.walk;
    var walkUp = walker.walkUp;

    return {
        fromPlainObject: function(ast) {
            walk(ast, function(node) {
                if (node.children && node.children instanceof List === false) {
                    node.children = new List().fromArray(node.children);
>>>>>>> 99ef3b4711c8dcd2f717e43dd012712d1f333361
                }
            });

            return ast;
        },
        toPlainObject: function(ast) {
<<<<<<< HEAD
            walk(ast, {
                leave: function(node) {
                    if (node.children && node.children instanceof List) {
                        node.children = node.children.toArray();
                    }
=======
            walkUp(ast, function(node) {
                if (node.children && node.children instanceof List) {
                    node.children = node.children.toArray();
>>>>>>> 99ef3b4711c8dcd2f717e43dd012712d1f333361
                }
            });

            return ast;
        }
    };
};

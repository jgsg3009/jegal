/* @flow */

import { getAndRemoveAttr, addRawAttr } from 'compiler/helpers'

function containVOnce (el: ASTElement): boolean {
  for (const attr in el.attrsMap) {
    if (/^v\-once$/i.test(attr)) {
      return true
    }
  }
  return false
}

<<<<<<< HEAD
export function preTransformVOnce (el: ASTElement) {
=======
export function preTransformVOnce (el: ASTElement, options: WeexCompilerOptions) {
>>>>>>> 99ef3b4711c8dcd2f717e43dd012712d1f333361
  if (containVOnce(el)) {
    getAndRemoveAttr(el, 'v-once', true)
    addRawAttr(el, '[[once]]', true)
  }
}
